(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[259],{2122:(e,s,t)=>{Promise.resolve().then(t.bind(t,7078))},7078:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(5155),r=t(2115),n=t(7058),l=t(4595),d=t(3312),i=t(9749),o=t(2508),c=t(6217),m=t(767),u=t(1567);let p=c.bL;c.l9;let x=c.ZL;c.bm;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(c.hJ,{ref:s,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});f.displayName=c.hJ.displayName;let g=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(x,{children:[(0,a.jsx)(f,{}),(0,a.jsxs)(c.UC,{ref:s,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[r,(0,a.jsxs)(c.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=c.UC.displayName;let h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};h.displayName="DialogHeader";let y=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(c.hE,{ref:s,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});y.displayName=c.hE.displayName;let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(c.VY,{ref:s,className:(0,u.cn)("text-sm text-muted-foreground",t),...r})});b.displayName=c.VY.displayName;var j=t(3894);function N(){var e;let[s,t]=(0,r.useState)([]),[c,m]=(0,r.useState)(!0),[u,x]=(0,r.useState)(null),[f,N]=(0,r.useState)(!1),[v,w]=(0,r.useState)(null),[_,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{R()},[]);let R=async()=>{m(!0);try{let e=(0,n.rJ)(l.db,"responses"),s=(await (0,n.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));s.sort((e,s)=>s.user_info.last_updated.toMillis()-e.user_info.last_updated.toMillis()),t(s)}catch(e){console.error("Error fetching responses:",e)}finally{m(!1)}},k=async e=>{m(!0);try{let s=await (0,n.x7)((0,n.H9)(l.db,"responses",e.id));if(s.exists()){let e={id:s.id,...s.data()};console.log("Full response data:",e),x(e),N(!0)}else console.warn("Response document not found, using limited data"),x(e),N(!0)}catch(s){console.error("Error fetching complete response:",s),x(e),N(!0)}finally{m(!1)}},C=async e=>{if(confirm("Are you sure you want to delete this response? This action cannot be undone.")){w(e);try{await (0,n.kd)((0,n.H9)(l.db,"responses",e)),t(s.filter(s=>s.id!==e))}catch(e){console.error("Error deleting response:",e),alert("Failed to delete response. Please try again.")}finally{w(null)}}},S=e=>e?new Date(e.toMillis()).toLocaleString():"N/A",E=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),D=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(e).reduce((t,a)=>{let r=s?"".concat(s,"_").concat(a):a;if(null===e[a]||"object"!=typeof e[a]||Array.isArray(e[a])||e[a]instanceof n.Dc){if(e[a]instanceof n.Dc)t[r]=S(e[a]);else if(Array.isArray(e[a]))t[r]=e[a].join(", ");else{var l;t[r]=String(null!==(l=e[a])&&void 0!==l?l:"")}}else Object.assign(t,D(e[a],r));return t},{})},P=async()=>{A(!0);try{let e=(0,n.rJ)(l.db,"responses"),s=await (0,n.GG)(e),t=await Promise.all(s.docs.map(async e=>{let s=await (0,n.x7)((0,n.H9)(l.db,"responses",e.id));return{id:e.id,...s.data()}})),a=new Set,r=t.map(e=>{let s=D(e);return Object.keys(s).forEach(e=>a.add(e)),s}),d=[Array.from(a).join(",")];r.forEach(e=>{let s=Array.from(a).map(s=>{let t=void 0!==e[s]?e[s]:"";return'"'.concat(String(t).replace(/"/g,'""'),'"')}).join(",");d.push(s)});let i=d.join("\n"),o=new Blob([i],{type:"text/csv;charset=utf-8;"}),c=URL.createObjectURL(o),m=document.createElement("a");m.setAttribute("href",c),m.setAttribute("download","kreo_survey_responses_".concat(new Date().toISOString().split("T")[0],".csv")),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)}catch(e){console.error("Error exporting to CSV:",e),alert("Failed to export responses. Please try again.")}finally{A(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(i.Zp,{className:"bg-gray-900 border-gray-800",children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Export Survey Data"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Download all survey responses in CSV format for analysis"})]}),(0,a.jsxs)(d.$,{variant:"default",size:"lg",className:"bg-purple-600 hover:bg-purple-700 text-white flex items-center gap-2",onClick:P,disabled:_||c||0===s.length,children:[(0,a.jsx)(j.A,{size:18}),_?"Exporting...":"Export All Responses (CSV)"]})]})})}),(0,a.jsxs)(i.Zp,{className:"bg-gray-900 border-gray-800",children:[(0,a.jsx)(i.aR,{className:"flex flex-row items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{className:"text-white",children:"Survey Responses"}),(0,a.jsx)(i.BT,{className:"text-gray-400",children:"View and manage all survey submissions"})]})}),(0,a.jsx)(i.Wu,{children:c?(0,a.jsx)("div",{className:"flex justify-center py-10",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-purple-500"})}):0===s.length?(0,a.jsx)("div",{className:"text-center py-10 text-gray-400",children:"No responses found. When users complete the survey, their responses will appear here."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(o.XI,{className:"w-full",children:[(0,a.jsx)(o.A0,{children:(0,a.jsxs)(o.Hj,{className:"border-gray-800",children:[(0,a.jsx)(o.nd,{className:"text-gray-300",children:"Email"}),(0,a.jsx)(o.nd,{className:"text-gray-300",children:"Submitted"}),(0,a.jsx)(o.nd,{className:"text-gray-300",children:"Status"}),(0,a.jsx)(o.nd,{className:"text-gray-300",children:"Progress"}),(0,a.jsx)(o.nd,{className:"text-gray-300",children:"Current Section"}),(0,a.jsx)(o.nd,{className:"text-gray-300",children:"Actions"})]})}),(0,a.jsx)(o.BF,{children:s.map(e=>{var s;return(0,a.jsxs)(o.Hj,{className:"border-gray-800 hover:bg-gray-800/50 cursor-pointer",onClick:()=>k(e),children:[(0,a.jsx)(o.nA,{className:"font-medium text-gray-200",children:(null===(s=e.demographics)||void 0===s?void 0:s.email)||e.user_info.email||"Anonymous"}),(0,a.jsx)(o.nA,{className:"text-gray-300",children:S(e.user_info.last_updated)}),(0,a.jsx)(o.nA,{children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("completed"===e.user_info.completion_status?"bg-green-500/20 text-green-400":"bg-amber-500/20 text-amber-400"),children:"completed"===e.user_info.completion_status?"Completed":"In Progress"})}),(0,a.jsxs)(o.nA,{className:"text-gray-300",children:[e.user_info.completion_percentage,"%"]}),(0,a.jsx)(o.nA,{className:"text-gray-300",children:E(e.user_info.current_section||"")}),(0,a.jsxs)(o.nA,{className:"space-x-2",children:[(0,a.jsx)(d.$,{variant:"outline",size:"sm",className:"border-gray-700 text-gray-300 hover:bg-gray-700",onClick:s=>{s.stopPropagation(),k(e)},children:"View"}),(0,a.jsx)(d.$,{variant:"destructive",size:"sm",disabled:v===e.id,onClick:s=>{s.stopPropagation(),C(e.id)},children:v===e.id?"Deleting...":"Delete"})]})]},e.id)})})]})})})]}),(0,a.jsx)(p,{open:f,onOpenChange:N,children:(0,a.jsxs)(g,{className:"bg-gray-900 text-white border-gray-800 max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(h,{children:[(0,a.jsx)(y,{className:"text-xl font-bold",children:"Response Details"}),(0,a.jsxs)(b,{className:"text-gray-400",children:["Submitted on ",S(null==u?void 0:u.user_info.last_updated)]})]}),u&&(0,a.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Email:"})," ",(0,a.jsx)("span",{className:"text-white",children:(null===(e=u.demographics)||void 0===e?void 0:e.email)||u.user_info.email||"Anonymous"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Status:"})," ",(0,a.jsx)("span",{className:"completed"===u.user_info.completion_status?"text-green-400":"text-amber-400",children:"completed"===u.user_info.completion_status?"Completed":"In Progress"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Started:"})," ",(0,a.jsx)("span",{className:"text-white",children:S(u.user_info.start_time)})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Last Updated:"})," ",(0,a.jsx)("span",{className:"text-white",children:S(u.user_info.last_updated)})]}),u.user_info.completion_time&&(0,a.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Completed:"})," ",(0,a.jsx)("span",{className:"text-white",children:S(u.user_info.completion_time)})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Progress:"})," ",(0,a.jsxs)("span",{className:"text-white",children:[u.user_info.completion_percentage,"%"]})]})]}),Object.entries(u).map(e=>{let[s,t]=e;if("id"===s||"user_info"===s||!t||"object"!=typeof t||0===Object.keys(t).length)return null;let r=E(s);return(0,a.jsxs)("div",{className:"border border-gray-800 rounded-md p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-purple-400 mb-3",children:r}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(t).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"bg-gray-800/50 p-3 rounded-md",children:[(0,a.jsxs)("span",{className:"text-gray-400",children:[E(t),":"]})," ",(0,a.jsx)("span",{className:"text-white",children:Array.isArray(r)?r.join(", "):"object"==typeof r&&null!==r?JSON.stringify(r):String(r)})]},"".concat(s,"-").concat(t))})})]},s)})]})]})})]})}},3312:(e,s,t)=>{"use strict";t.d(s,{$:()=>o});var a=t(5155),r=t(2115),n=t(2317),l=t(1027),d=t(1567);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:o=!1,...c}=e,m=o?n.DX:"button";return(0,a.jsx)(m,{className:(0,d.cn)(i({variant:r,size:l,className:t})),ref:s,...c})});o.displayName="Button"},9749:(e,s,t)=>{"use strict";t.d(s,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>d,wL:()=>m});var a=t(5155),r=t(2115),n=t(1567);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});l.displayName="Card";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...r})});i.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});m.displayName="CardFooter"},2508:(e,s,t)=>{"use strict";t.d(s,{A0:()=>d,BF:()=>i,Hj:()=>o,XI:()=>l,nA:()=>m,nd:()=>c});var a=t(5155),r=t(2115),n=t(1567);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",t),...r})})});l.displayName="Table";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",t),...r})});d.displayName="TableHeader";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",t),...r})});i.displayName="TableBody",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});o.displayName="TableRow";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("th",{ref:s,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})});c.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("td",{ref:s,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})});m.displayName="TableCell",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption"},4595:(e,s,t)=>{"use strict";t.d(s,{db:()=>d,j:()=>i});var a=t(9904),r=t(7058),n=t(4565);let l=0===(0,a.Dk)().length?(0,a.Wp)({apiKey:"AIzaSyASvnePd7RJ6RmwvyZvhE040t9MHnPqgVE",authDomain:"howindiagames.firebaseapp.com",projectId:"howindiagames",storageBucket:"howindiagames.firebasestorage.app",messagingSenderId:"450815957892",appId:"1:450815957892:web:31c8c6c026712d1599dbd1"}):(0,a.Dk)()[0],d=(0,r.aU)(l),i=(0,n.xI)(l)},1567:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(3463),r=t(9795);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,895,181,118,568,36,441,517,358],()=>s(2122)),_N_E=e.O()}]);